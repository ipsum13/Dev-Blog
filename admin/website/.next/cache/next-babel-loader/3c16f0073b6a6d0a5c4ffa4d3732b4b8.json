{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\Dev-Blog\\\\admin\\\\website\\\\pages\\\\blog\\\\edit-post\\\\[id].js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport Head from \"next/head\";\nimport moment from \"moment\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport Header from \"../../../components/header.js\";\nimport Sidebar from \"../../../components/sidebar.js\";\nimport DeleteBlogPostModal from \"../../../components/modals/deleteBlogPost.js\";\nimport getBlogPostById from \"../../../api/blog-posts/getPostById.js\";\n\nif (typeof navigator !== \"undefined\") {\n  require(\"codemirror/mode/markdown/markdown\");\n}\n\nexport default class extends Component {\n  static async getInitialProps({\n    req,\n    res,\n    query\n  }) {\n    const apiResult = await getBlogPostById(query.id, req);\n\n    if (!apiResult.authSuccess) {\n      res.writeHead(302, {\n        Location: \"/login\"\n      });\n      res.end();\n    }\n\n    return {\n      post: apiResult && apiResult.post,\n      getDataError: apiResult && apiResult.getDataError,\n      notFoundError: apiResult && apiResult.notFoundError\n    };\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"updateTitleInputValue\", event => {\n      this.setState({\n        titleInputValue: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"updateUrlTitleInputValue\", event => {\n      this.setState({\n        urlTitleInputValue: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"updateDateInputValue\", event => {\n      this.setState({\n        dateInputValue: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"setDateInputValueToNow\", () => {\n      const dateString = moment().format(\"YYYY-MM-DD\");\n      const timeString = moment().format(\"HH:mm\");\n      this.setState({\n        dateInputValue: dateString + \"T\" + timeString\n      });\n    });\n\n    _defineProperty(this, \"updateImageUrlInputValue\", event => {\n      this.setState({\n        imageUrlInputValue: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"updateTagsInputValue\", event => {\n      this.setState({\n        tagsInputValue: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"updateMarkdownInputValue\", value => {\n      this.setState({\n        markdownInputValue: value\n      });\n    });\n\n    _defineProperty(this, \"updateSeoTitleTagInputValue\", event => {\n      let charLeft;\n\n      if (60 - event.target.value.length > 0) {\n        charLeft = 60 - event.target.value.length;\n      } else {\n        charLeft = 0;\n      }\n\n      this.setState({\n        seoTitleTagInputValue: event.target.value,\n        seoTitleTagCharLeft: charLeft\n      });\n    });\n\n    _defineProperty(this, \"updateMetaDescriptionInputValue\", event => {\n      let charLeft;\n\n      if (160 - event.target.value.length > 0) {\n        charLeft = 160 - event.target.value.length;\n      } else {\n        charLeft = 0;\n      }\n\n      this.setState({\n        metaDescriptionInputValue: event.target.value,\n        metaDescriptionCharLeft: charLeft\n      });\n    });\n\n    _defineProperty(this, \"submitEditPostRequest\", () => {\n      this.setState({\n        submitLoading: true\n      });\n    });\n\n    _defineProperty(this, \"showDeleteModalRequest\", () => {\n      this.setState({\n        showDeleteModal: true\n      });\n    });\n\n    _defineProperty(this, \"hideDeleteModalRequest\", () => {\n      this.setState({\n        deleteError: false,\n        deleteLoading: false,\n        showDeleteModal: false\n      });\n    });\n\n    _defineProperty(this, \"deleteBlogPostRequest\", () => {\n      this.setState({\n        deleteLoading: true\n      });\n    });\n\n    const post = this.props.post;\n    this.state = {\n      submitLoading: false,\n      submitError: false,\n      errorMsg: \"\",\n      titleInputValue: post && post.title,\n      urlTitleInputValue: post && post.urlTitle,\n      dateInputValue: post && moment.unix(post.dateTimestamp).format(\"YYYY-MM-DD\") + \"T\" + moment.unix(post.dateTimestamp).format(\"HH:mm\"),\n      tagsInputValue: post && post.tags.join(\", \"),\n      imageUrlInputValue: post && post.thumbnailImageUrl,\n      markdownInputValue: post && post.markdownContent,\n      seoTitleTagInputValue: post && post.seoTitleTag,\n      seoTitleTagCharLeft: post && 60 - post.seoTitleTag.length,\n      metaDescriptionInputValue: post && post.seoMetaDescription,\n      metaDescriptionCharLeft: post && 160 - post.seoMetaDescription.length,\n      //delete modal\n      deleteError: false,\n      deleteLoading: false,\n      showDeleteModal: false\n    };\n    this.codemirror = null;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"layout-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Head, {\n        children: /*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"Edit Post | Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Sidebar, {\n        page: \"blog-posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"layout-content-container\",\n        children: !this.props.getDataError && !this.props.notFoundError ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"edit-blog-post-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit-blog-post-header\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Edit Blog Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit-blog-post-form-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-label\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-input\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: this.state.titleInputValue,\n                  onChange: this.updateTitleInputValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-label\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Url Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-input\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: this.state.urlTitleInputValue,\n                  onChange: this.updateUrlTitleInputValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-label\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-input\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"datetime-local\",\n                  value: this.state.dateInputValue,\n                  onChange: this.updateDateInputValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  onClick: () => this.setDateInputValueToNow(),\n                  className: \"edit-blog-post-form-section-date-input-now\",\n                  children: \"Now\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-label\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Image URL\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-input\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: this.state.imageUrlInputValue,\n                  onChange: this.updateImageUrlInputValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-label\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Tags\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-input\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: this.state.tagsInputValue,\n                  onChange: this.updateTagsInputValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-label\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Markdown Content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-code-content-input\",\n                children: CodeMirror && /*#__PURE__*/_jsxDEV(CodeMirror, {\n                  className: \"edit-blog-post-form-section-codemirror\",\n                  editorDidMount: editor => {\n                    this.codemirror = editor;\n                  },\n                  value: this.state.markdownInputValue,\n                  onBeforeChange: (editor, data, value) => {\n                    this.updateMarkdownInputValue(value);\n                  },\n                  onChange: (editor, data, value) => {\n                    this.updateMarkdownInputValue(value);\n                  },\n                  options: {\n                    mode: \"markdown\",\n                    theme: \"dracula\",\n                    lineNumbers: true\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-seo-section-title\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"SEO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-label\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Title Tag\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-input\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: this.state.seoTitleTagInputValue,\n                  onChange: this.updateSeoTitleTagInputValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: this.state.seoTitleTagCharLeft > 0 ? \"char-length green\" : \"char-length red\",\n                  children: this.state.seoTitleTagCharLeft\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-label\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Meta Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-section-input\",\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  type: \"text\",\n                  value: this.state.metaDescriptionInputValue,\n                  onChange: this.updateMetaDescriptionInputValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: this.state.metaDescriptionCharLeft > 0 ? \"char-length green\" : \"char-length red\",\n                  children: this.state.metaDescriptionCharLeft\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-form-btns-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-blog-post-form-submit-btn-container\",\n                children: !this.state.submitLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: this.submitEditPostRequest,\n                  className: \"edit-blog-post-form-btn\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Submit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-blog-post-form-btn loading\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Loading\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: this.showDeleteModalRequest,\n                className: \"edit-blog-post-form-delete\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 17\n            }, this), this.state.submitError ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-submit-error-msg\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: this.state.errorMsg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 19\n            }, this) : null, this.state.submitSuccess ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-blog-post-submit-success-msg\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Success!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 19\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"edit-blog-post-get-data-error-msg\",\n          children: this.props.getDataError ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"An error occurred.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Blog post not found.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DeleteBlogPostModal, {\n        error: this.state.deleteError,\n        loading: this.state.deleteLoading,\n        show: this.state.showDeleteModal,\n        hideRequest: this.hideDeleteModalRequest,\n        deleteBlogPostRequest: this.deleteBlogPostRequest\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["F:/Dev-Blog/admin/website/pages/blog/edit-post/[id].js"],"names":["React","Component","Head","moment","Controlled","CodeMirror","Header","Sidebar","DeleteBlogPostModal","getBlogPostById","navigator","require","getInitialProps","req","res","query","apiResult","id","authSuccess","writeHead","Location","end","post","getDataError","notFoundError","constructor","props","event","setState","titleInputValue","target","value","urlTitleInputValue","dateInputValue","dateString","format","timeString","imageUrlInputValue","tagsInputValue","markdownInputValue","charLeft","length","seoTitleTagInputValue","seoTitleTagCharLeft","metaDescriptionInputValue","metaDescriptionCharLeft","submitLoading","showDeleteModal","deleteError","deleteLoading","state","submitError","errorMsg","title","urlTitle","unix","dateTimestamp","tags","join","thumbnailImageUrl","markdownContent","seoTitleTag","seoMetaDescription","codemirror","render","updateTitleInputValue","updateUrlTitleInputValue","updateDateInputValue","setDateInputValueToNow","updateImageUrlInputValue","updateTagsInputValue","editor","data","updateMarkdownInputValue","mode","theme","lineNumbers","updateSeoTitleTagInputValue","updateMetaDescriptionInputValue","submitEditPostRequest","showDeleteModalRequest","submitSuccess","hideDeleteModalRequest","deleteBlogPostRequest"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\r\nimport Head from \"next/head\"\r\nimport moment from \"moment\"\r\nimport { Controlled as CodeMirror } from \"react-codemirror2\"\r\n\r\nimport Header from \"../../../components/header.js\"\r\nimport Sidebar from \"../../../components/sidebar.js\"\r\nimport DeleteBlogPostModal from \"../../../components/modals/deleteBlogPost.js\"\r\n\r\nimport getBlogPostById from \"../../../api/blog-posts/getPostById.js\"\r\n\r\nif (typeof navigator !== \"undefined\") {\r\n  require(\"codemirror/mode/markdown/markdown\")\r\n}\r\n\r\nexport default class extends Component {\r\n  static async getInitialProps ({req, res, query}) {\r\n    const apiResult = await getBlogPostById(query.id, req)\r\n\r\n    if (!apiResult.authSuccess) {\r\n      res.writeHead(302, { Location: \"/login\" })\r\n      res.end()\r\n    }\r\n\r\n    return {\r\n      post: apiResult && apiResult.post,\r\n      getDataError: apiResult && apiResult.getDataError,\r\n      notFoundError: apiResult && apiResult.notFoundError\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const post = this.props.post\r\n\r\n    this.state = {\r\n      submitLoading: false,\r\n      submitError: false,\r\n      errorMsg: \"\",\r\n      titleInputValue: post && post.title,\r\n      urlTitleInputValue: post && post.urlTitle,\r\n      dateInputValue: post && moment.unix(post.dateTimestamp).format(\"YYYY-MM-DD\") + \"T\" + moment.unix(post.dateTimestamp).format(\"HH:mm\"),\r\n      tagsInputValue: post && post.tags.join(\", \"),\r\n      imageUrlInputValue: post && post.thumbnailImageUrl,\r\n      markdownInputValue: post && post.markdownContent,\r\n      seoTitleTagInputValue: post && post.seoTitleTag,\r\n      seoTitleTagCharLeft: post && 60 - post.seoTitleTag.length,\r\n      metaDescriptionInputValue: post && post.seoMetaDescription,\r\n      metaDescriptionCharLeft: post && 160 - post.seoMetaDescription.length,\r\n      //delete modal\r\n      deleteError: false,\r\n      deleteLoading: false,\r\n      showDeleteModal: false\r\n    }\r\n\r\n    this.codemirror = null\r\n  }\r\n\r\n  updateTitleInputValue = (event) => {\r\n    this.setState({titleInputValue: event.target.value})\r\n  }\r\n\r\n  updateUrlTitleInputValue = (event) => {\r\n    this.setState({urlTitleInputValue: event.target.value})\r\n  }\r\n\r\n  updateDateInputValue = (event) => {\r\n    this.setState({dateInputValue: event.target.value})\r\n  }\r\n\r\n  setDateInputValueToNow = () => {\r\n    const dateString = moment().format(\"YYYY-MM-DD\")\r\n    const timeString = moment().format(\"HH:mm\")\r\n    this.setState({dateInputValue: dateString + \"T\" + timeString})\r\n  }\r\n\r\n  updateImageUrlInputValue = (event) => {\r\n    this.setState({imageUrlInputValue: event.target.value})\r\n  }\r\n\r\n  updateTagsInputValue = (event) => {\r\n    this.setState({tagsInputValue: event.target.value})\r\n  }\r\n\r\n  updateMarkdownInputValue = (value) => {\r\n    this.setState({markdownInputValue: value})\r\n  }\r\n\r\n  updateSeoTitleTagInputValue = (event) => {\r\n    let charLeft\r\n    if (60 - event.target.value.length > 0) {\r\n      charLeft = 60 - event.target.value.length\r\n    } else {\r\n      charLeft = 0\r\n    }\r\n\r\n    this.setState({\r\n      seoTitleTagInputValue: event.target.value,\r\n      seoTitleTagCharLeft: charLeft\r\n    })\r\n  }\r\n\r\n  updateMetaDescriptionInputValue = (event) => {\r\n    let charLeft\r\n    if (160 - event.target.value.length > 0) {\r\n      charLeft = 160 - event.target.value.length\r\n    } else {\r\n      charLeft = 0\r\n    }\r\n\r\n    this.setState({\r\n      metaDescriptionInputValue: event.target.value,\r\n      metaDescriptionCharLeft: charLeft\r\n    })\r\n  }\r\n\r\n  submitEditPostRequest = () => {\r\n    this.setState({submitLoading: true})\r\n  }\r\n\r\n  showDeleteModalRequest = () => {\r\n    this.setState({showDeleteModal: true})\r\n  }\r\n\r\n  hideDeleteModalRequest = () => {\r\n    this.setState({deleteError: false, deleteLoading: false, showDeleteModal: false})\r\n  }\r\n\r\n  deleteBlogPostRequest = () => {\r\n    this.setState({deleteLoading: true})\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"layout-wrapper\">\r\n        <Head>\r\n          <title>Edit Post | Admin</title>\r\n        </Head>\r\n        <Header />\r\n        <Sidebar page=\"blog-posts\" />\r\n        <div className=\"layout-content-container\">\r\n          {\r\n            !this.props.getDataError && !this.props.notFoundError ?\r\n            <div className=\"edit-blog-post-content\">\r\n              <div className=\"edit-blog-post-header\">\r\n                <span>Edit Blog Post</span>\r\n              </div>\r\n              <div className=\"edit-blog-post-form-container\">\r\n                <div className=\"edit-blog-post-form-section\">\r\n                  <div className=\"edit-blog-post-form-section-label\">\r\n                    <span>Title</span>\r\n                  </div>\r\n                  <div className=\"edit-blog-post-form-section-input\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={this.state.titleInputValue}\r\n                      onChange={this.updateTitleInputValue}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-blog-post-form-section\">\r\n                  <div className=\"edit-blog-post-form-section-label\">\r\n                    <span>Url Title</span>\r\n                  </div>\r\n                  <div className=\"edit-blog-post-form-section-input\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={this.state.urlTitleInputValue}\r\n                      onChange={this.updateUrlTitleInputValue}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-blog-post-form-section\">\r\n                  <div className=\"edit-blog-post-form-section-label\">\r\n                    <span>Date</span>\r\n                  </div>\r\n                  <div className=\"edit-blog-post-form-section-input\">\r\n                    <input\r\n                      type=\"datetime-local\"\r\n                      value={this.state.dateInputValue}\r\n                      onChange={this.updateDateInputValue}\r\n                    />\r\n                    <span onClick={() => this.setDateInputValueToNow()} className=\"edit-blog-post-form-section-date-input-now\">Now</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-blog-post-form-section\">\r\n                  <div className=\"edit-blog-post-form-section-label\">\r\n                    <span>Image URL</span>\r\n                  </div>\r\n                  <div className=\"edit-blog-post-form-section-input\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={this.state.imageUrlInputValue}\r\n                      onChange={this.updateImageUrlInputValue}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-blog-post-form-section\">\r\n                  <div className=\"edit-blog-post-form-section-label\">\r\n                    <span>Tags</span>\r\n                  </div>\r\n                  <div className=\"edit-blog-post-form-section-input\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={this.state.tagsInputValue}\r\n                      onChange={this.updateTagsInputValue}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-blog-post-form-section\">\r\n                  <div className=\"edit-blog-post-form-section-label\">\r\n                    <span>Markdown Content</span>\r\n                  </div>\r\n                  <div className=\"edit-blog-post-form-section-code-content-input\">\r\n                    {\r\n                      CodeMirror &&\r\n                      <CodeMirror\r\n                        className=\"edit-blog-post-form-section-codemirror\"\r\n                        editorDidMount={editor => {\r\n                          this.codemirror = editor;\r\n                        }}\r\n                        value={this.state.markdownInputValue}\r\n                        onBeforeChange={(editor, data, value) => {\r\n                          this.updateMarkdownInputValue(value)\r\n                        }}\r\n                        onChange={(editor, data, value) => {\r\n                          this.updateMarkdownInputValue(value)\r\n                        }}\r\n                        options={{\r\n                          mode: \"markdown\",\r\n                          theme: \"dracula\",\r\n                          lineNumbers: true\r\n                        }}\r\n                      />\r\n                    }\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-blog-post-seo-section-title\">\r\n                  <span>SEO</span>\r\n                </div>\r\n                <div className=\"edit-blog-post-form-section\">\r\n                  <div className=\"edit-blog-post-form-section-label\">\r\n                    <span>Title Tag</span>\r\n                  </div>\r\n                  <div className=\"edit-blog-post-form-section-input\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={this.state.seoTitleTagInputValue}\r\n                      onChange={this.updateSeoTitleTagInputValue}\r\n                    />\r\n                    <span className={this.state.seoTitleTagCharLeft > 0 ? \"char-length green\" : \"char-length red\"}>{this.state.seoTitleTagCharLeft}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-blog-post-form-section\">\r\n                  <div className=\"edit-blog-post-form-section-label\">\r\n                    <span>Meta Description</span>\r\n                  </div>\r\n                  <div className=\"edit-blog-post-form-section-input\">\r\n                    <textarea\r\n                      type=\"text\"\r\n                      value={this.state.metaDescriptionInputValue}\r\n                      onChange={this.updateMetaDescriptionInputValue}\r\n                    />\r\n                    <span className={this.state.metaDescriptionCharLeft > 0 ? \"char-length green\" : \"char-length red\"}>\r\n                      {this.state.metaDescriptionCharLeft}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-blog-post-form-btns-section\">\r\n                  <div className=\"edit-blog-post-form-submit-btn-container\">\r\n                    {\r\n                      !this.state.submitLoading ?\r\n                      <div onClick={this.submitEditPostRequest} className=\"edit-blog-post-form-btn\">\r\n                        <span>Submit</span>\r\n                      </div> :\r\n                      <div className=\"edit-blog-post-form-btn loading\">\r\n                        <span>Loading</span>\r\n                      </div>\r\n                    }\r\n                  </div>\r\n                  <div onClick={this.showDeleteModalRequest} className=\"edit-blog-post-form-delete\">\r\n                    <span>Delete</span>\r\n                  </div>\r\n                </div>\r\n                {\r\n                  this.state.submitError ?\r\n                  <div className=\"edit-blog-post-submit-error-msg\">\r\n                    <span>{this.state.errorMsg}</span>\r\n                  </div> : null\r\n                }\r\n                {\r\n                  this.state.submitSuccess ?\r\n                  <div className=\"edit-blog-post-submit-success-msg\">\r\n                    <span>Success!</span>\r\n                  </div> : null\r\n                }\r\n              </div>\r\n            </div> :\r\n            <div className=\"edit-blog-post-get-data-error-msg\">\r\n              {\r\n                this.props.getDataError ?\r\n                <span>An error occurred.</span> :\r\n                <span>Blog post not found.</span>\r\n              }\r\n            </div>\r\n          }\r\n        </div>\r\n        <DeleteBlogPostModal\r\n          error={this.state.deleteError}\r\n          loading={this.state.deleteLoading}\r\n          show={this.state.showDeleteModal}\r\n          hideRequest={this.hideDeleteModalRequest}\r\n          deleteBlogPostRequest={this.deleteBlogPostRequest}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}